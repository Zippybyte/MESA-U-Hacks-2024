<!DOCTYPE html>
<html lang="en">

<head>
    <title>Page Title</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
        }
    </style>
     <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
</head>

<body>

    <h1>My Website</h1>
    <p>Should be a map here.</p>
    <div style="width:100%; display:grid">
        <div style="width:80%; justify-self: right">
            <div id="map" style = "justify-self:right ;width:800px; height:600px"></div>  
        </div>  
    </div>
    
    <script 
        # Adds
        src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin="">
    </script>
    <script>
        const test_langlot = [37.7, -122];
        const test_zoom = 10;
        var map = L.map('map').setView(test_langlot, test_zoom);
        
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map);

        let locations = [
            {
                "id": 1,
                "lat": 37.704707,
                "long": -122.153863,
                "title": "Davis Street Community Center",
                "address": "3081 Teagarden St., San Leandro, CA 94577"
            },
            {
                "id": 2,
                "lat": 37.708707,
                "long": -122.453863,
                "title": "Davis Street Community Center",
                "address": "3081 Teagarden St., San Leandro, CA 94577"
            },
            {
                "id": 3,
                "lat": 37.708707,
                "long": -122.163863,
                "title": "Davis Street Community Center",
                "address": "3081 Teagarden St., San Leandro, CA 94577"
            }
        ]
        locations.forEach(console.log)
        console.log(locations[1]);
        for ( let i = 0 ; i < locations.length ; i++){
            console.log(locations[i] + " ___ " + i);
        }
        
        // fetch('./data.json')
        //     .then((response) => response.json())
        //     .then((json) => console.log(json));

        // locations.forEach(setMarker);
        /*for ( let i = 0 ; i< locations.length ; i++){
            new L.Marker([element.lat,element.long]).addTo(map)
            .bindPopup('<div class="card"><h3>'+element.title+'</h3></div><div>'+element.address+'</div>')
            // On click display the popup
            .on("click", onClick())
        }
        for ( let i = 0 ; i < locations.length ; i++){
            console.log(locations[i] + " ___ " + i);
            new L.Marker([locations[i].lat, locations[i].long])
                .addTo(map)
                .bindPopup('<div class="card"><h3>'+locations[i].title+'</h3></div><div>'+locations[i].address+'</div>')
                // On click display the popup
                .on("click", onClick());
        }*/

        locations.forEach(element => {
            new L.Marker([element.lat,element.long]).addTo(map)
            .on("click", event =>{
                event.target.bindPopup('<div class="card"><h3>'+element.title+'</h3></div><div>'+element.address+'</div>').openPopup()})
        });
        

        
        /*
        function setMarker(element) {
            var popup = L.popup('<div class="card"><h3>'+element.title+'</h3></div><div>'+element.address+'</div>');
            
            new L.Marker([element.lat, element.long])
            .addTo(map)
            .bindPopup(popup)
            // On click display the popup
            .on("click", onClick());
        }
        */

        // Opens a popup for the event target which is an element.
        function onClick(event) {
            
            ;
        }

    </script>
</body>

</html>